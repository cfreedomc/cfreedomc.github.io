---
title: Java并发编程-1-内存模型
date: 2018-11-06
tags: Concurrent
---
![图片](https://i.loli.net/2019/03/05/5c7e92c031bd2.jpg)
>本篇主要介绍了在Java虚拟机中的内存模型的情况以及基本的内存使用流程;

<!-- more -->

### 1.什么是Java内存模型
* Java内存模型又称JMM(Java Memory Model),是Java虚拟机为了屏蔽平台和硬件实现java并发能力的一致性;
* 作用:
  * 规范了如何利用共享变量;
* Java的内存模型
  * Java中的内存模型主要分为堆和栈;
    * 堆:存放共享变量,对象的真实存放位置;
    * 栈:存放本地变量,对象的引用等;
### 2.CPU的内存模型
![图片](https://i.loli.net/2019/03/05/5c7e92c050cd2.png)
* CPU访问速度:
  * 由于CPU的运行速度和访问主内存的速度相差非常多的量级,所以硬件设计师设计了一个高速缓存,来处理CPU速度和内存速度不一致的问题;
  * 内部寄存器>>高速缓存>>>>>内存
* 运行原理:
  * 读:当CPU需要用到内存中内容时,会先将其读到缓存中,在读取;
  * 写:CPU会先写到缓存中,最后在同步到主内存;
### 3.Java内存模型运行
* Java内存的抽象图

![图片](https://i.loli.net/2019/03/05/5c7e92c0528f5.png)
* Java内存模型执行过程

![图片](https://i.loli.net/2019/03/05/5c7e92c05411e.png)

