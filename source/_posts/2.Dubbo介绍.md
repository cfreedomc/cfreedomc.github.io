---
title: Dubbo系列-2-Dubbo介绍
date: 2018-04-10
tags: dubbo
---
![图片](http://pl5cg4rhb.bkt.clouddn.com/dubbo7page.png)
>本篇主要介绍dubbo是什么以及其主要的特性和组成;

<!-- more -->
## Dubbo概念
### Dubbo是什么
Apache Dubbo是一款高性能的Java RPC框架,[Dubbo链接](http://dubbo.apache.org/zh-cn/index.html)
### Dubbo特性
![](https://raw.githubusercontent.com/cfreedomc/picture/master/img/dubbo2-1png.png)


---
## Dubbo解决什么问题
### URL瓶颈
* 问题:
  * 在没有完全服务化之前,实现服务之间调用仅仅是简单的URL的暴露与调用,但是当服务量越来越大,需要对应暴露的url也就越多,自然配置难度就几何倍的增加,所以需要一个集中管理的方案;
* 解决方案:
  * 通过服务注册中心，动态的注册和发现服务，使服务的位置透明。并通过在消费方获取服务提供方地址列表，实现软负载均衡和 Failover，降低对 F5 硬件负载均衡器的依赖，也能减少部分成本

### 服务间关系复杂
* 问题:
  * 服务数量的增加,相互之间复杂的调用关系,使得很难人为的去理清楚;
* 解决方案:
  * Dubbo可以自动的生成依赖关系图;

### 服务性能监控
* 问题:
  * 服务的使用仍处于混沌之中,对于服务的性能(调用量,响应时间),权重等问题都无法高效处理;
* 解决方案:
  * Dubbo有系统的监控以上参数,并且可以动态的改变权重等设置;

---
## Dubbo的组成
![](https://raw.githubusercontent.com/cfreedomc/picture/master/img/dubbo%E7%9A%84%E6%9E%B6%E6%9E%84%E5%9B%BE.png)
### 节点说明
* Provider
  * 服务提供方
* Consumer
  * 服务消费方
* Registry
  * 服务注册与发现的注册中心
* Mointor
  * 统计调用次数和时间的监控中心
* Container
  * 服务运行容器

### 步骤说明
0:服务容器负责启动,加载,运行服务提供者;
1:服务提供者在启动时,向注册中心注册;
2:服务消费者在启动时,从注册中心订阅所需服务;
3:注册中心返回服务提供者地址列表给消费者,若发生变更,注册中心将基于场链接推送变更数据给消费者;
4:服务消费者从提供者地址列表中,基于软负载均衡算法,调用服务;
5:服务消费者和提供者,在内存中累计调用次数和调用时间,定时每分钟发送一次统计数据到监控中心;

---
## Dubbo架构特点
### 连通性
* 注册中心负责服务地址的注册与查找,相当于目录服务,服务提供者与消费者只在启动时与注册中心交互,注册中心不转发请求,压力小;
* 服务提供者向注册中心提供服务,并汇报调用时间到监控中心,此时间不包含网络开销;
* 服务消费者向注册中心获取服务提供者地址列表,并根据负载算法直接调用提供者,同时汇报调用时间到监控中心,此时间包含网络开销;
* 注册中心,服务提供者,消费者三者之间是长连接,监控中心不是;
* 注册中心通过长连接感知服务提供者的存在,服务提供者宕机,注册中心将立即推送事件通知消费者;
* 注册中心和监控中心全部宕机,不影响已运行的提供者和消费者,消费者在本地缓存了提供者列表;
* 注册中心和监控中心都是可选的,服务消费者可以直连服务提供者;

### 健壮性
* 监控中心宕机不影响使用,但丢失部分采样数据;
* 数据库宕机,注册中心仍能通过缓存提供服务列表查询,但不能注册新服务;
* 注册中心对等集群,任意一台宕机,将自动切换到另一台;
* 注册中心全部宕机,服务提供者和服务消费者仍通过本地缓存通讯;
* 服务提供者无状态,任意一台宕机,不影响使用;
* 服务提供者全部宕机后,服务消费者应用将无法使用,并无限次重连等待服务提供者恢复;

### 伸缩性
* 注册中心为对等集群,可动态增加机器部署实例,所有客户端将自动发现新的注册中心;
* 服务提供者无状态,可动态增加机器部署实例,注册中心将推送新的服务提供者信息给消费者;


